# 100天精通Python（基础篇）——第23天：文件基础科普+打开文件

## 

## **1. 文件的概念**

### **1.1 文件的概念和作用**

嘿，小伙伴们！让我用幽默的语气来给你们解释一下计算机中的文件是什么吧！

计算机的文件就像是你的宝藏，它们被珍藏在各种长期储存设备上，比如硬盘、U盘、移动硬盘、光盘等等。这些设备就像是你的私人仓库，用来保存你的数据，就像是你的宝贝们。

文件的作用就像是你的备忘录，它们帮你记录下各种各样的信息，以备将来需要的时候使用。就像是你的超能力，可以随时查看和修改这些信息，让你的计算机变得更加智能。

所以，记住，文件就是你的宝藏，它们帮你保存重要的数据，让你的计算机变得更加强大！

![图片](https://mmbiz.qpic.cn/sz_mmbiz_png/klS3icnSibsdZ9C72PMlV6tgB7OAN1VfrDbNAhmqbIuZu5fVwWBtO4Q7V2iaSzISwSp7SRMc0UWkVcWEibt7zKKsVg/640?wx_fmt=png&from=appmsg&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1)

### **1.2 文件的存储方式**

在计算机中，文件是以二进制的方式保存在磁盘上的。这意味着文件的内容是由一串由0和1组成的二进制数据组成的。

我们可以把文件分为两种类型：文本文件和二进制文件。

- **文本文件**：这种文件可以使用文本编辑软件来查看。其实质上还是二进制文件，只是我们可以用文本编辑软件来方便地查看和编辑它们。比如说，Python的源代码就是文本文件。
- **二进制文件**：这种文件的内容并不是给人直接阅读的，而是提供给其他软件使用的。比如说，图片文件、音频文件、视频文件等等。你不能用文本编辑软件来查看它们，因为它们的内容是以二进制形式存储的。

希望这个解释能帮助你更好地理解文件的概念和存储方式！继续加油学习Python吧！🚀

## **2. 文件的基本操作**

### **2.1 操作文件的套路**

在计算机世界中，要操作文件就像是和一只顽皮的小猫咪打交道，需要掌握一些固定的套路。总共有三个步骤，就像是和小猫咪玩耍一样：

1. **打开文件**：首先，我们要像打开一扇门一样，打开文件的大门，让我们可以进入文件的世界。
2. **读、写文件**：接下来，就是和小猫咪互动的时刻了！我们可以选择读取文件的内容，就像是抚摸小猫咪的毛发一样，将文件的内容温柔地读入内存。或者，我们也可以选择写入文件，就像是给小猫咪写一封信一样，将内存中的内容写入到文件中。
    - **读**：读取文件就像是把小猫咪的秘密告诉我们一样，将文件的内容读取到内存中，让我们可以处理它们。
    - **写**：写入文件就像是给小猫咪写情书一样，将内存中的内容写入到文件中，让我们可以永久地保存它们。
3. **关闭文件**：最后，就像是和小猫咪告别一样，我们要关闭文件，释放资源，让其他人也能够和小猫咪玩耍。

记住这个操作文件的套路，就像是和小猫咪玩耍一样，既有趣又容易理解！让我们开始愉快地操作文件吧！

### **2.2 操作文件的函数/方法**

在Python中，要像一位魔法师一样操作文件，我们需要记住一个函数和三个方法。这些函数和方法就像我们的法术书，让我们能够打开、读取、写入和关闭文件。

首先，让我们打开文件，就像打开一扇神奇的门一样。我们需要使用`open`函数，它会给我们一个文件操作对象，就像给我们一把钥匙，让我们可以进入文件的世界。

接下来，我们需要读取文件的内容，就像读取一本魔法书一样。这时候，我们可以使用`read`方法，它会将文件的内容读取到内存中，就像将魔法书的知识注入到我们的大脑中一样。

如果我们想要将一些魔法咒语写入文件，就像在魔法书上写下我们的笔记一样，我们可以使用`write`方法。它会将指定的内容写入文件中，就像我们在魔法书上写下我们的心得一样。

最后，当我们完成了对文件的操作，就像完成了一场魔法表演一样，我们需要关闭文件。这时候，我们可以使用`close`方法，它会关闭文件，就像我们结束了一场精彩的魔法表演一样。

记住，这些方法都需要通过文件对象来调用，就像我们需要使用魔法棒来施展魔法一样。所以，让我们掌握这些文件操作的法术，成为真正的Python魔法师吧！

### **2.3 read方法 —— 读取文件**

打开文件就像是打开一本书，我们需要知道书的名字（文件名）才能找到它。使用`open`函数，将文件名作为参数传入，它会返回一个文件操作对象，就像是我们手里拿着一本书。

但是要小心哦，如果你告诉我一个不存在的书名，我可是会生气的，抛出一个异常给你。

一旦我们成功打开了文件，就可以使用`read`方法来读取文件的内容了。这就像是我们一口气把整本书读完，然后把它的内容返回给你。

读完之后，我们要记得把书关上，也就是使用`close`方法来关闭文件。如果我们忘记关闭文件，就好像是把书随手丢在一边，不仅会浪费系统资源，还会影响到后续对文件的访问。

在实际开发中，我们通常会先写好打开和关闭文件的代码，再来处理中间的读/写操作。这就像是在读书之前先准备好书签和书架，然后再开始阅读。

还有一件事要注意哦，读完一本书后，我们会把书签放在最后一页，这样下次再读的时候就可以从最后一页开始了。同样地，当我们执行了`read`方法后，文件指针会移动到文件的末尾。

那么，如果我们已经读取了整本书的内容，再次调用`read`方法，能够获得到新的内容吗？答案是不能哦！因为文件指针已经在末尾了，再读就没有新的内容可读了。

让我们来看一下代码示例：

```python
# 1. 打开文件
file = open("README")
# 2. 读取
text = file.read()
print(text)
# 3. 关闭
file.close()
```

记住，这只是一个简单的示例，实际开发中要注意先打开和关闭文件的顺序，再进行读/写操作。就像是读书一样，先准备好书签和书架，然后才能畅快地阅读。

### **2.4 打开文件的方式**

`open`函数默认以只读方式打开文件，并且返回文件对象。

语法如下：

```python
f = open("文件名", "访问方式")
```

访问方式：

- `r`：以只读方式打开文件。文件的指针将会放在文件的开头，这是默认模式。如果文件不存在，抛出异常。
- `w`：以只写方式打开文件。如果文件存在会被覆盖。如果文件不存在，创建新文件。
- `a`：以追加方式打开文件。如果该文件已存在，文件指针将会放在文件的结尾。如果文件不存在，创建新文件进行写入。
- `r+`：以读写方式打开文件。文件的指针将会放在文件的开头。如果文件不存在，抛出异常。
- `w+`：以读写方式打开文件。如果文件存在会被覆盖。如果文件不存在，创建新文件。
- `a+`：以读写方式打开文件。如果该文件已存在，文件指针将会放在文件的结尾。如果文件不存在，创建新文件进行写入。

提示：频繁的移动文件指针会影响文件的读写效率，开发中更多的时候会以只读、只写的方式来操作文件。

写入文件示例：

```python
# 打开文件
f = open("README", "w")
f.write("hello python！\n")
f.write("今天天气真好")
# 关闭文件
f.close()
```

### **2.5 按行读取文件内容**

- `read`方法默认会把文件的所有内容一次性读取到内存
- 如果文件太大，对内存的占用会非常严重

`readline`方法可以一次读取一行内容。方法执行后，会把文件指针移动到下一行，准备再次读取。

读取大文件的正确姿势：

```python
# 打开文件
file = open("README")
while True:
    # 读取一行内容
    text = file.readline()
    # 判断是否读到内容
    if not text:
        break
    # 每读取一行的末尾已经有了一个 `\n`
    print(text, end="")
    
# 关闭文件
file.close()
```

### **2.6 文件读写案例 —— 复制文件**

**目标**：用代码的方式，来实现文件复制过程

![图片](https://flower-1324274955.cos.ap-shanghai.myqcloud.com/640)

**小文件复制**：打开一个已有文件，读取完整内容，并写入到另外一个文件

```python
# 1. 打开文件
file_read = open("README")
file_write = open("README[复件]", "w")
# 2. 读取并写入文件
text = file_read.read()
file_write.write(text)
# 3. 关闭文件
file_read.close()
file_write.close()
```

**大文件复制**：打开一个已有文件，逐行读取内容，并顺序写入到另外一个文件

```python
# 1. 打开文件
file_read = open("README")
file_write = open("README[复件]", "w")
# 2. 读取并写入文件
while True:
    # 每次读取一行
    text = file_read.readline()
    # 判断是否读取到内容
    if not text:
        break
    file_write.write(text)
    
# 3. 关闭文件
file_read.close()
file_write.close()
```

## **3. 文件/目录的常用管理操作**

- 在终端或文件浏览器中，可以执行常规的文件/目录管理操作，例如：
    - 创建、重命名、删除、改变路径、查看目录内容等等。
- 在Python中，如果希望通过程序实现上述功能，需要导入`os`模块。

**文件操作**：

| 方法名 | 说明       | 示例                            |
| ------ | ---------- | ------------------------------- |
| rename | 重命名文件 | os.rename(源文件名, 目标文件名) |
| remove | 删除文件   | os.remove(文件名)               |

**目录操作**：

| 方法名     | 说明           | 示例                    |
| ---------- | -------------- | ----------------------- |
| listdir    | 目录列表       | os.listdir(目录名)      |
| mkdir      | 创建目录       | os.mkdir(目录名)        |
| rmdir      | 删除目录       | os.rmdir(目录名)        |
| getcwd     | 获取当前目录   | os.getcwd()             |
| chdir      | 修改工作目录   | os.chdir(目标目录)      |
| path.isdir | 判断是否是目录 | os.path.isdir(文件路径) |

**提示**：文件或者目录操作都支持相对路径和绝对路径。

## **4. 文本文件的编码格式（科普）**

- 文本文件存储的内容是基于字符编码的文件，常见的编码有ASCII编码、UNICODE编码等。
- Python 2.x 默认使用ASCII编码格式。
- Python 3.x 默认使用UTF-8编码格式。

### **4.1 ASCII 编码和 UNICODE 编码**

**ASCII 编码**

- 计算机中只有 256 个 ASCII 字符
- 一个 ASCII 在内存中占用 **1 个字节** 的空间
    - 8 个 0/1 的排列组合方式一共有 256 种，也就是 2 ** 8

![图片](https://mmbiz.qpic.cn/sz_mmbiz_png/klS3icnSibsdZ9C72PMlV6tgB7OAN1VfrDHkSq6VWqEx0BlDYKHxFJ3ibicl3nn9PFEHI3RicsQic4rq4ib1vfGbfDlyQ/640?wx_fmt=png&from=appmsg&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1)

**UTF-8 编码格式**

- 计算机中使用 **1~6 个字节** 来表示一个 UTF-8 字符，涵盖了 **地球上几乎所有地区的文字**。这意味着无论你是使用哪种语言，你都可以在计算机上表示和处理你的文字。
- 大多数汉字会使用 **3 个字节** 表示，这是因为汉字的数量庞大，需要更多的字节来表示。
- UTF-8 是 UNICODE 编码的一种编码格式，它为世界上的每个字符分配了一个唯一的数字，以便计算机可以理解和处理它们。

### **4.2 Python 2.x 中如何使用中文**

> Python 2.x 默认使用 ASCII 编码格式，这意味着默认情况下，它只能处理英文字符。

- 在 Python 2.x 文件的 **第一行** 增加以下代码，解释器会以 utf-8 编码来处理 python 文件：

    ```python
    # *-* coding:utf8 *-*

​        这种方式是官方推荐的！它告诉解释器使用 UTF-8 编码来处理文件中的字符。

- 你也可以使用以下代码：

    ```python
    # coding=utf8
    ```
    
    这种方式也可以告诉解释器使用 UTF-8 编码。

**unicode 字符串**:

- 在 Python 2.x 中，即使指定了文件使用 UTF-8 的编码格式，但是在遍历字符串时，仍然会以字节为单位遍历字符串。这意味着对于包含非英文字符的字符串，你可能无法正确地处理它们。

- 为了能够正确地遍历字符串，你需要在定义字符串时，在字符串的引号前增加一个小写字母 u，告诉解释器这是一个 unicode 字符串（使用 UTF-8 编码格式的字符串）。

    ```python
    # *-* coding:utf8 *-*
    # 在字符串前，增加一个 `u` 表示这个字符串是一个 utf8 字符串
    hello_str = u"你好世界"
    print(hello_str)
    for c in hello_str:
        print(c)
    ```

希望这些解释能帮助你更好地理解 Python 2.x 中使用中文的方法！

